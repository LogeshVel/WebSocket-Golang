<!DOCTYPE html>
<body>
    <div id="root">
        <p>Welcome to WebSocket client</p>
        <p id="wsStatus">Connecting..</p>
    </div>
    <script>
        let socket = new WebSocket("ws://localhost:8090/ws")
        const root = document.getElementById('root');
        socket.onopen = () => {
            console.log("Successfully connected")
            socket.send("Hi Server. Im JS Client")
            const wsStatusp = document.getElementById('wsStatus');
            const newElement = document.createElement('p');
            newElement.setAttribute("id","wsStatus")
            newElement.textContent = 'Connected to WebSocket';
            root.replaceChild(newElement, wsStatusp);
        }
        socket.onclose = (event) =>{
            console.log("Disconnected", event)
            const wsStatusp = document.getElementById('wsStatus');
            const newElement = document.createElement('p');
            newElement.setAttribute("id","wsStatus")
            newElement.textContent = 'Disconnected from WebSocket';
            root.replaceChild(newElement, wsStatusp);
        }
        socket.onmessage = (event) =>{
            console.log("received msg", event)
            console.log("Data", event["data"])
            const newElement = document.createElement('p');
            newElement.textContent = event["data"]
            root.appendChild(newElement);
        }
    </script>
</body>